########################################################
IMPORTANTE DEL USUARIO NO ELMINAR Y LEER ATENTAMENTE:
- NO MOCKS, NO MOCKS, NO MOCKS!!!!
- NI PLACEHOLDERS, NI PRUEBAS. EL SISTEMA DEBE DESARROLLARSE COMPLETAMENTE.
- KISS, MODULARIDAD Y PROFESIONALIDAD
- VERIFICAR LO QUE YA EXISTE PARA NO DUPLICAR NI OLVIDAR
- USA MCP FILESYSTEM, NO ARTEFACTOS
########################################################

# 🤖 wAIckoff MCP Server - Contexto Optimizado v1.9.0

## 📋 Estado Actual
- **Versión:** v1.9.0 - CON CONTEXTO PERSISTENTE 3 MESES
- **Fecha:** 18/01/2025
- **Status:** Production Ready - 117+ herramientas con memoria histórica
- **Nueva Feature:** MongoDB + Files dual storage para contexto
- **Arquitectura:** Completamente modular + Context Layer

## 🆕 SISTEMA DE CONTEXTO PERSISTENTE (v1.9.0)
- **Almacenamiento Dual:** MongoDB principal + archivos .gz backup
- **3 Niveles:** Daily (100), Weekly (50), Monthly (20)
- **Auto-carga:** 90 días de contexto en CADA análisis
- **Resolución Conflictos:** Valida señales vs patrones históricos
- **0 Pérdida Datos:** Entre sesiones, todo persistente

## 🔥 TAREAS COMPLETADAS HOY
**TASK-039: Sistema de Contexto Persistente** - ✅ COMPLETADO
- **Resultado:** Memoria 3 meses implementada con MongoDB + Files
- **Impacto:** TODAS las herramientas ahora usan contexto histórico
- **Archivos:**
  - `src/services/context/persistentContext.ts`
  - `src/services/context/contextAwareWrapper.ts`
  - `src/adapters/contextIntegration.ts`

## 🎯 Próximas Tareas Priorizadas
1. **Construir Contexto Histórico** - Ejecutar análisis iniciales
2. **Testing con Contexto** - Validar resolución conflictos
3. **TASK-033:** Testing Exhaustivo (4-5h)
4. **TASK-028:** API Privada Bybit (7.5h)
5. **TASK-008:** Integración Waickoff AI (2h)

## ✅ Sistema v1.9.0 Features
- **Contexto Automático:** Cada análisis incluye 90 días historia
- **MongoDB Ready:** Configuración automática en .env
- **Fallback Inteligente:** Si no hay MongoDB, usa archivos
- **Compresión:** Archivos .gz para eficiencia
- **Mantenimiento Auto:** Limpieza diaria de datos viejos

## 🏗️ Arquitectura Actualizada
```
Context Layer (NUEVO v1.9.0)
├── PersistentContextManager
│   ├── MongoDB Integration
│   ├── File Compression
│   └── 3-Level Storage
├── ContextAwareWrapper
│   ├── Auto-loading
│   ├── Conflict resolution
│   └── Confidence scoring
└── Integration Module
```

## 📊 Sistema (117+ herramientas CON CONTEXTO)
Todas las herramientas ahora incluyen:
- `historicalContext` - Resumen 90 días
- `historicalAlignment` - Score alineación histórica
- `contextConfidence` - Confianza basada en datos

## 📁 Archivos Clave Contexto
- `.env` - Configuración MongoDB
- `storage/context/` - Archivos comprimidos
- `claude/docs/context-system-guide.md` - Documentación

## 📏 Comandos
```bash
npm run build    # Compilar con contexto
npm start        # Ejecutar con MongoDB auto-connect
```

## 🔧 Configuración MongoDB
```env
MONGODB_URI=mongodb://localhost:27017
MONGODB_DATABASE=waickoff_mcp
ENABLE_CONTEXT_MANAGER=true
CONTEXT_RETENTION_DAYS=90
```

## 📋 Historial
- v1.9.0: Sistema Contexto Persistente
- v1.8.3: 117+ herramientas operativas
- v1.7.1: Smart Money Concepts completo
- Ver `claude/archive/` para detalles