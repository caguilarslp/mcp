# üìä wAIckoff MCP - Gu√≠a de Indicadores T√©cnicos

## üéØ Herramientas de An√°lisis T√©cnico Avanzado

Este documento describe las herramientas de an√°lisis t√©cnico avanzado que est√°n en desarrollo para el servidor wAIckoff MCP v1.6.5.

---

## ‚ö†Ô∏è **ESTADO ACTUAL: PREPARADAS PARA IMPLEMENTACI√ìN**

Las siguientes herramientas tienen la infraestructura t√©cnica preparada (servicios, handlers, tipos) pero requieren implementaci√≥n completa de la l√≥gica de an√°lisis. Actualmente retornan "Handler not yet implemented".

---

## üìà Herramientas de Fibonacci

### `calculate_fibonacci_levels`
Calcula niveles de retroceso y extensi√≥n de Fibonacci con auto-detecci√≥n de swings.

**Estado:** üîß **PREPARADO** - Handler placeholder implementado
**Implementaci√≥n:** Pendiente en TASK-019 (Herramientas T√©cnicas)

**Par√°metros (Planificados):**
- `symbol` (requerido): Par de trading
- `timeframe` (opcional): Marco temporal ('15', '30', '60', '240', 'D'). Default: '60'
- `lookback` (opcional): Per√≠odos para detectar swings. Default: 50
- `includeExtensions` (opcional): Incluir extensiones adem√°s de retracements. Default: true
- `minSwingSize` (opcional): Tama√±o m√≠nimo del swing en %. Default: 3.0

**Funcionalidades Planificadas:**
- **Auto-detecci√≥n de swings**: Identifica autom√°ticamente high/low significativos
- **Niveles cl√°sicos**: 23.6%, 38.2%, 50%, 61.8%, 78.6%, 100%
- **Extensiones**: 127.2%, 161.8%, 261.8%
- **Confluencia con S/R**: Validaci√≥n con niveles existentes
- **Scoring por toques**: Puntuaci√≥n basada en toques hist√≥ricos
- **Proyecci√≥n de targets**: Objetivos de precio basados en extensiones

**Ejemplo de Uso (Futuro):**
```
calculate_fibonacci_levels BTCUSDT timeframe=240 includeExtensions=true
```

**Respuesta Planificada:**
```json
{
  "status": "success",
  "data": {
    "symbol": "BTCUSDT",
    "swingHigh": 45000,
    "swingLow": 38000,
    "swingSize": 18.42,
    "retracements": {
      "23.6%": 43348,
      "38.2%": 41326,
      "50.0%": 41500,
      "61.8%": 39674,
      "78.6%": 38498
    },
    "extensions": {
      "127.2%": 46904,
      "161.8%": 49326,
      "261.8%": 56326
    },
    "confluence": [
      {
        "level": 41500,
        "fibonacci": "50.0%",
        "supportResistance": "strong_support",
        "score": 85
      }
    ]
  }
}
```

---

## üìä Herramientas de Bollinger Bands

### `analyze_bollinger_bands`
An√°lisis completo de Bollinger Bands con detecci√≥n de squeeze y divergencias.

**Estado:** üîß **PREPARADO** - Handler placeholder implementado
**Implementaci√≥n:** Pendiente en TASK-019 (Herramientas T√©cnicas)

**Par√°metros (Planificados):**
- `symbol` (requerido): Par de trading
- `timeframe` (opcional): Marco temporal ('15', '30', '60', '240', 'D'). Default: '60'
- `period` (opcional): Per√≠odo para SMA. Default: 20
- `stdDev` (opcional): Multiplicador desviaci√≥n est√°ndar. Default: 2.0
- `periods` (opcional): N√∫mero de per√≠odos a analizar. Default: 100

**Funcionalidades Planificadas:**
- **Bandas adaptativas**: Per√≠odo y desviaci√≥n configurables
- **Detecci√≥n de squeeze**: Baja volatilidad (bandas estrechas)
- **Walking the bands**: Tendencia fuerte cuando precio camina por una banda
- **Divergencias con precio**: Se√±ales de reversi√≥n
- **%B indicator**: Posici√≥n del precio dentro de las bandas
- **Bandwidth**: Medida de la amplitud de las bandas
- **Se√±ales de trading**: Bounces, breakouts, squeeze releases

**Ejemplo de Uso (Futuro):**
```
analyze_bollinger_bands ETHUSDT period=20 stdDev=2.0
```

**Respuesta Planificada:**
```json
{
  "status": "success",
  "data": {
    "symbol": "ETHUSDT",
    "currentPrice": 2340,
    "bands": {
      "upper": 2450,
      "middle": 2350,
      "lower": 2250
    },
    "indicators": {
      "percentB": 0.45,
      "bandwidth": 8.5,
      "squeeze": false
    },
    "signals": [
      {
        "type": "bounce_off_lower_band",
        "confidence": 75,
        "target": 2350,
        "timestamp": "2025-06-11T10:30:00Z"
      }
    ],
    "analysis": {
      "trend": "ranging",
      "volatility": "normal",
      "recommendation": "wait_for_breakout"
    }
  }
}
```

---

## üåä Herramientas de Elliott Wave

### `detect_elliott_waves`
Detecci√≥n autom√°tica de ondas Elliott con validaci√≥n de reglas.

**Estado:** üîß **PREPARADO** - Handler placeholder implementado
**Implementaci√≥n:** Pendiente en TASK-019 (Herramientas T√©cnicas)

**Par√°metros (Planificados):**
- `symbol` (requerido): Par de trading
- `timeframe` (opcional): Marco temporal ('60', '240', 'D', 'W'). Default: '240'
- `lookback` (opcional): Per√≠odos para an√°lisis. Default: 200
- `minWaveSize` (opcional): Tama√±o m√≠nimo de onda en %. Default: 5.0
- `validateRules` (opcional): Aplicar validaci√≥n estricta de reglas Elliott. Default: true

**Funcionalidades Planificadas:**
- **Detecci√≥n de ondas impulsivas**: Ondas 1-5 con validaci√≥n
- **Detecci√≥n de ondas correctivas**: Ondas A-C
- **Validaci√≥n de reglas**: Onda 3 no m√°s corta, etc.
- **Multi-timeframe counting**: Conteo en m√∫ltiples marcos temporales
- **Proyecci√≥n de targets**: Objetivos basados en ratios Fibonacci
- **Degree classification**: Grado de las ondas (Primary, Intermediate, etc.)
- **Alternation principle**: Aplicaci√≥n del principio de alternaci√≥n

**Ejemplo de Uso (Futuro):**
```
detect_elliott_waves BTCUSDT timeframe=D validateRules=true
```

**Respuesta Planificada:**
```json
{
  "status": "success",
  "data": {
    "symbol": "BTCUSDT",
    "currentWave": "wave_4",
    "waveStructure": {
      "impulse": [
        {"wave": 1, "start": 30000, "end": 42000, "percentage": 40.0},
        {"wave": 2, "start": 42000, "end": 35000, "percentage": -16.7},
        {"wave": 3, "start": 35000, "end": 65000, "percentage": 85.7},
        {"wave": 4, "start": 65000, "end": 50000, "percentage": -23.1},
        {"wave": 5, "start": 50000, "end": null, "percentage": null}
      ]
    },
    "validation": {
      "rulesValid": true,
      "wave3NotShortest": true,
      "alternation": true,
      "confidence": 78
    },
    "projections": {
      "wave5Target": {
        "conservative": 70000,
        "aggressive": 85000,
        "fibonacci": 75000
      }
    }
  }
}
```

---

## üîÑ Herramientas de Confluencias T√©cnicas

### `find_technical_confluences`
Encuentra confluencias entre m√∫ltiples indicadores t√©cnicos para validaci√≥n cruzada.

**Estado:** üîß **PREPARADO** - Handler placeholder implementado
**Implementaci√≥n:** Pendiente en TASK-019 (Herramientas T√©cnicas)

**Par√°metros (Planificados):**
- `symbol` (requerido): Par de trading
- `timeframe` (opcional): Marco temporal. Default: '60'
- `indicators` (opcional): Indicadores a incluir. Default: ['fibonacci', 'bollinger', 'elliott', 'wyckoff', 'support_resistance']
- `tolerance` (opcional): Tolerancia para confluencias en %. Default: 1.0
- `minConfluence` (opcional): M√≠nimo n√∫mero de indicadores para confluencia. Default: 2

**Funcionalidades Planificadas:**
- **Multi-indicator analysis**: Combina Fibonacci, Bollinger, Elliott, Wyckoff, S/R
- **Confluence scoring**: Puntuaci√≥n basada en n√∫mero y fuerza de confluencias
- **Price level clustering**: Agrupaci√≥n de niveles cercanos
- **Timeframe alignment**: Confluencias entre m√∫ltiples marcos temporales
- **Signal validation**: Validaci√≥n cruzada de se√±ales
- **Risk/reward optimization**: Mejores entradas basadas en confluencias

**Ejemplo de Uso (Futuro):**
```
find_technical_confluences BTCUSDT indicators=["fibonacci","wyckoff","support_resistance"]
```

**Respuesta Planificada:**
```json
{
  "status": "success",
  "data": {
    "symbol": "BTCUSDT",
    "confluences": [
      {
        "priceLevel": 42500,
        "indicators": [
          {"type": "fibonacci", "level": "61.8%", "strength": "strong"},
          {"type": "wyckoff", "level": "spring_target", "strength": "medium"},
          {"type": "support_resistance", "level": "historical_support", "strength": "strong"}
        ],
        "totalScore": 92,
        "recommendation": "strong_buy_zone",
        "riskReward": 3.2
      }
    ],
    "analysis": {
      "totalConfluences": 3,
      "strongLevels": 1,
      "mediumLevels": 2,
      "bestEntry": 42500,
      "stopLoss": 41000,
      "targets": [44000, 46500, 48000]
    }
  }
}
```

---

## üöÄ Roadmap de Implementaci√≥n

### **TASK-019 - Herramientas de An√°lisis T√©cnico (8h estimadas)**

#### **Fase 1: Servicios Core (3h)**
- ‚úÖ **FibonacciService** - Placeholder creado
- ‚úÖ **BollingerBandsService** - Placeholder creado  
- ‚úÖ **ElliottWaveService** - Placeholder creado
- ‚è≥ **Implementar l√≥gica completa** - Algoritmos de c√°lculo

#### **Fase 2: Handlers y Tools (2h)**
- ‚úÖ **Handlers placeholders** - Ya implementados
- ‚è≥ **L√≥gica real de handlers** - Reemplazar placeholders
- ‚è≥ **Tool definitions** - Definir tools MCP

#### **Fase 3: Integraci√≥n y Testing (2h)**
- ‚è≥ **Core Engine integration** - M√©todos p√∫blicos
- ‚è≥ **Testing unitarios** - Validar algoritmos
- ‚è≥ **Integration testing** - End-to-end validation

#### **Fase 4: Confluencias y Optimizaci√≥n (1h)**
- ‚è≥ **TechnicalConfluenceService** - An√°lisis multi-indicador
- ‚è≥ **Performance optimization** - Caching y optimizaci√≥n
- ‚è≥ **Documentation** - User guide actualizado

---

## üîß Estado T√©cnico Actual

### **‚úÖ Preparado (TASK-019 Base)**
- **Servicios creados**: fibonacci.ts, bollingerBands.ts, elliottWave.ts
- **Handlers implementados**: Placeholders en TechnicalAnalysisHandlers
- **Tipos definidos**: Interfaces TypeScript preparadas
- **Error handling**: Try/catch structure implementada
- **Integration ready**: Core Engine preparado para nuevos m√©todos

### **‚è≥ Pendiente de Implementaci√≥n**
- **Algoritmos de c√°lculo**: L√≥gica matem√°tica de cada indicador
- **Tool definitions**: Definiciones MCP para nuevas herramientas
- **Testing completo**: Validaci√≥n de algoritmos y respuestas
- **Documentation**: Ejemplos y casos de uso completos

---

## üìù Notas de Desarrollo

### **Decisiones Arquitect√≥nicas**
1. **Modular design**: Cada indicador en servicio separado
2. **Standardized interfaces**: Mismo patr√≥n para todos los servicios
3. **Dependency injection**: Servicios inyectables en Core Engine
4. **Error handling**: Manejo robusto en todas las capas
5. **Performance monitoring**: M√©tricas integradas

### **Consideraciones de Implementaci√≥n**
1. **Algoritmos probados**: Usar f√≥rmulas est√°ndar de la industria
2. **Configurabilidad**: Par√°metros ajustables por usuario
3. **Eficiencia**: C√°lculos optimizados para tiempo real
4. **Precisi√≥n**: Validaci√≥n matem√°tica rigurosa
5. **Usabilidad**: Respuestas claras y accionables

---

## üéØ Casos de Uso Planificados

### **Para Trading Algor√≠tmico**
1. **Confluencias autom√°ticas**: Identificar zonas de alta probabilidad
2. **Signal validation**: Validar se√±ales con m√∫ltiples indicadores
3. **Risk management**: Mejores stop-loss basados en niveles t√©cnicos
4. **Target optimization**: Objetivos de precio m√°s precisos

### **Para An√°lisis Manual**
1. **Multi-timeframe analysis**: Coherencia entre marcos temporales
2. **Pattern recognition**: Identificar patrones cl√°sicos autom√°ticamente
3. **Educational tools**: Aprender sobre indicadores t√©cnicos
4. **Market structure**: Entender estructura subyacente del mercado

---

## üìä M√©tricas de √âxito Planificadas

- **Precisi√≥n de se√±ales**: >75% accuracy en backtesting
- **Performance**: <500ms response time por herramienta
- **Usabilidad**: Respuestas claras y accionables
- **Integraci√≥n**: Seamless con herramientas existentes
- **Adoption**: Alta utilizaci√≥n por parte de usuarios

---

*Versi√≥n: 1.6.5 - Actualizado: 11/06/2025*  
*Estado: Preparado para Implementaci√≥n - TASK-019 Pendiente*  
*Prioridad: Alta - Herramientas fundamentales para an√°lisis t√©cnico completo*