IMPORTANTÍSIMO LEER PRIMERO:
###########################################
 DEL USUARIO, LEER Y NO ELIMINAR:
 - NO SOBREINGENIARIA, NUNCA!!
 - SIEMPRE PRODUCTION-READY. NO MOCKS, NO PLACEHOLDERS
 - KISS, MODULARIDAD, PROFESIONALIDAD, SEGURIDAD, ESCALABILIDAD, ESTABILIDAD 
 - NO ACTUALIZARÁS TRAZABILIDAD HASTA EL VISTO BUENO DEL USUARIO
 - HARÁS PAUSAS DE VEZ EN CUANDO PARA VERIFICAR QUE TODO ESTÁ CORRECTO
 - NO HAZ QUE FUNCIONE PRIMERO Y DESPUÉS OPTIMIZA, ESE NO ES EL CAMINO A SEGUIR.
 - NO CREARÁS SCRIPTS DE PRUEBAS, NI PARA INICIOS DE DOCKER, NI NADA. EL USUARIO TE AYUDARÁ CON LAS PRUEBAS.
 - NO CREAR ARCHIVOS .BAT O .PY EN LA RAÍZ A MENOS QUE EL USUARIO LO PIDA EXPLÍCITAMENTE
 - EL USUARIO SE ENCARGA DE LEVANTAR Y DETENER DOCKER - NO CREAR SCRIPTS PARA ESTO
 - NO CREES UN ARCHIVO TEST, Y OTRO SI FALLA, Y OTRO, ..., USA EL MISMO Y MODIFICALO
###########################################

# WADM - wAIckoff Data Manager v0.1.0

## 🚨 ESTADO CRÍTICO (2025-06-25)

### ARQUITECTURA ACTUAL (3 componentes):
1. **Backend API** (`:8000`) - FastAPI + Collectors + 2 indicadores
2. **MCP Server** (`:8001`) - 133 herramientas de análisis
3. **Frontend** (`:3000`) - React Dashboard (en desarrollo)

### PROBLEMA PRINCIPAL: **ARQUITECTURA DUPLICADA**
- Backend calcula algunos indicadores (Volume Profile, Order Flow)
- MCP Server tiene 133 herramientas más avanzadas
- Dos sistemas MongoDB separados = datos fragmentados
- Frontend debe consultar 2 endpoints diferentes

### SOLUCIÓN EN PROGRESO: **UNIFICACIÓN**
Ver `/claude/architecture/` para detalles completos

## 📊 INDICADORES

### Actualmente en Backend (Python):
1. **Volume Profile** - POC, VAH, VAL
2. **Order Flow** - Delta, momentum, absorption

### Actualmente en MCP (TypeScript):
- 133 herramientas incluyendo Wyckoff, SMC, Elliott, Fibonacci, etc.

### FALTAN en Backend:
1. **Footprint Charts** - Bid/Ask por nivel de precio
2. **Market Profile** - TPO letters
3. **Liquidation Levels** - Por leverage
4. **Dark Pool Detection** - Trades institucionales
5. **VWAP** - Con bandas
6. **Bollinger Bands**
7. **RSI**
8. **MACD**

### PROBLEMA: Indicadores calculan cada N trades
- **Actual**: Cada 50 trades (inconsistente)
- **Propuesto**: Por tiempo fijo (1min, 5min, 15min)

## 🎯 PLAN INMEDIATO

### Hoy:
1. Cambiar cálculo de indicadores a tiempo fijo
2. Unificar MongoDB (mismo connection string)

### Esta semana:
1. Implementar indicadores faltantes
2. Migrar MCP engine al backend
3. Eliminar arquitectura duplicada

### Resultado final:
- Un solo backend con todo
- Un solo MongoDB
- Un solo endpoint para frontend
- Mejor performance y mantenimiento

## 🛠️ COMANDOS CLAVE

```bash
# Desarrollo actual
docker-compose up -d          # Levanta todo
docker-compose logs -f backend  # Ver logs

# Verificar MongoDB
docker exec -it wadm-mongo-1 mongosh -u wadm -p wadm_secure_2024
> use wadm
> show collections
> db.volume_profile.countDocuments()

# Frontend desarrollo
cd app && npm run dev
```

## 📁 ESTRUCTURA IMPORTANTE

```
wadm/
├── src/
│   ├── api/          # FastAPI routes
│   ├── collectors/   # WebSocket exchanges
│   ├── indicators/   # Solo 2 actualmente
│   ├── storage/      # MongoDB manager
│   └── manager.py    # Coordinador principal
├── mcp_server/       # 133 herramientas (a migrar)
├── app/              # Frontend React
└── claude/
    ├── architecture/ # NUEVA ARQUITECTURA
    └── daily/        # Logs diarios
```

## 🔧 CONFIGURACIÓN

- **MongoDB**: `mongodb://wadm:wadm_secure_2024@mongo:27017/wadm?authSource=admin`
- **Symbols**: BTCUSDT, ETHUSDT, SOLUSDT, TRXUSDT, XRPUSDT, XLMUSDT, HBARUSDT, ADAUSDT
- **Exchanges**: Bybit, Binance, Coinbase, Kraken

## ⚠️ NOTAS CRÍTICAS

1. **NO usar artefactos** - Todo directo al filesystem
2. **Python 3.12 strict** - Type hints obligatorios
3. **Async by default** - Todo I/O asíncrono
4. **Dashboard puede esperar** - Primero unificar backend

## 📈 MÉTRICAS ACTUALES

- Trades procesados: 1400+/minuto
- Indicadores calculados: Variable (problema)
- Latencia API→MCP: ~50ms (eliminar)
- Storage: MongoDB 7.0

---

**SIGUIENTE PASO**: Implementar cálculo de indicadores por tiempo fijo en `src/manager.py`
